[flake8]
# Line length to match black
max-line-length = 120

# Global ignores - patterns that are intentional, black-compatible, or pre-existing tech debt
# E203: whitespace before ':' (conflicts with black slice formatting)
# E501: line too long (pre-existing in many files, 120 char limit from black)
# W503: line break before binary operator (conflicts with black)
# F401: imported but unused (pre-existing tech debt - many files, tracked in GOVPLAT-005)
# E711: comparison to None - required for SQLAlchemy column filters (== None is intentional)
# E712: comparison to True/False - required for SQLAlchemy column filters (== True is intentional)
extend-ignore = E203, E501, W503, F401, E711, E712

# Per-file ignores for specific pre-existing issues
# Format: path:CODE,CODE
per-file-ignores =
    # Domain models - re-exports for convenience
    src/domain/models/__init__.py:F401
    # Infrastructure modules with conditional imports
    src/infrastructure/cache/redis_cache.py:E402,F401
    # Services with complex AI logic (to be refactored)
    src/domain/services/ai_audit_service.py:C901,F841
    src/domain/services/ai_predictive_service.py:C901,F841
    src/domain/services/ai_models.py:F841
    # Routes with unused imports from refactoring
    src/api/routes/ai_intelligence.py:F401
    src/api/routes/audit_trail.py:F401
    src/api/routes/auditor_competence.py:F401
    src/api/routes/copilot.py:F401
    src/api/routes/document_control.py:F401
    src/api/routes/executive_dashboard.py:F401
    src/api/routes/form_config.py:F401
    src/api/routes/iso27001.py:F401
    src/api/routes/kri.py:F401
    src/api/routes/planet_mark.py:F401,F841,E501
    src/api/routes/policy_acknowledgment.py:E741,F401
    src/api/routes/push_notifications.py:F811,F401
    src/api/routes/rca_tools.py:F401
    src/api/routes/uvdb.py:F401,E501
    src/api/routes/workflow.py:E741
    # Schema files
    src/api/schemas/form_config.py:F401
    # Test files
    tests/security/test_owasp_comprehensive.py:E203
    tests/test_e2e_form_workflow.py:F541
    # Services
    src/domain/services/copilot_service.py:F541
    src/services/auditor_competence.py:F401
    src/infrastructure/monitoring/azure_monitor.py:F401

# Exclude directories
exclude =
    .git,
    .venv,
    __pycache__,
    alembic/versions,
    build,
    dist,
    *.egg-info

# Maximum complexity (raise to allow pre-existing complex functions)
max-complexity = 20
